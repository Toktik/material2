{"version":3,"file":"icon.js","sourceRoot":"","sources":["file:///C:/projects/material2/tmp/broccoli_type_script_compiler-input_base_path-2PVWyBBf.tmp/0/src/demo-app/components/icon/icon.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n    ChangeDetectionStrategy,\r\n    Component,\r\n    ElementRef,\r\n    Input,\r\n    OnChanges,\r\n    OnInit,\r\n    Renderer,\r\n    SimpleChange,\r\n    ViewEncapsulation,\r\n    AfterViewChecked\r\n} from '@angular/core';\r\nimport {MdError} from '@angular2-material/core/errors/error';\r\nimport {MdIconRegistry} from './icon-registry';\r\nexport {MdIconRegistry} from './icon-registry';\r\n\r\n\r\n/** Exception thrown when an invalid icon name is passed to an md-icon component. */\r\nexport class MdIconInvalidNameError extends MdError {\r\n  constructor(iconName: string) {\r\n      super(`Invalid icon name: \"${iconName}\"`);\r\n  }\r\n}\r\n\r\n/**\r\n * Component to display an icon. It can be used in the following ways:\r\n * - Specify the svgSrc input to load an SVG icon from a URL. The SVG content is directly inlined\r\n *   as a child of the <md-icon> component, so that CSS styles can easily be applied to it.\r\n *   The URL is loaded via an XMLHttpRequest, so it must be on the same domain as the page or its\r\n *   server must be configured to allow cross-domain requests.\r\n *   Example:\r\n *     <md-icon svgSrc=\"assets/arrow.svg\"></md-icon>\r\n *\r\n * - Specify the svgIcon input to load an SVG icon from a URL previously registered with the\r\n *   addSvgIcon, addSvgIconInNamespace, addSvgIconSet, or addSvgIconSetInNamespace methods of\r\n *   MdIconRegistry. If the svgIcon value contains a colon it is assumed to be in the format\r\n *   \"[namespace]:[name]\", if not the value will be the name of an icon in the default namespace.\r\n *   Examples:\r\n *     <md-icon svgIcon=\"left-arrow\"></md-icon>\r\n *     <md-icon svgIcon=\"animals:cat\"></md-icon>\r\n *\r\n * - Use a font ligature as an icon by putting the ligature text in the content of the <md-icon>\r\n *   component. By default the Material icons font is used as described at\r\n *   http://google.github.io/material-design-icons/#icon-font-for-the-web. You can specify an\r\n *   alternate font by setting the fontSet input to either the CSS class to apply to use the\r\n *   desired font, or to an alias previously registered with MdIconRegistry.registerFontClassAlias.\r\n *   Examples:\r\n *     <md-icon>home</md-icon>\r\n *     <md-icon fontSet=\"myfont\">sun</md-icon>\r\n *\r\n * - Specify a font glyph to be included via CSS rules by setting the fontSet input to specify the\r\n *   font, and the fontIcon input to specify the icon. Typically the fontIcon will specify a\r\n *   CSS class which causes the glyph to be displayed via a :before selector, as in\r\n *   https://fortawesome.github.io/Font-Awesome/examples/\r\n *   Example:\r\n *     <md-icon fontSet=\"fa\" fontIcon=\"alarm\"></md-icon>\r\n */\r\n@Component({\r\n  moduleId: module.id,\r\n  template: '<ng-content></ng-content>',\r\n  selector: 'md-icon',\r\n  styleUrls: ['icon.css'],\r\n  host: {\r\n    'role': 'img',\r\n  },\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class MdIcon implements OnChanges, OnInit, AfterViewChecked {\r\n  @Input() svgSrc: string;\r\n  @Input() svgIcon: string;\r\n  @Input() fontSet: string;\r\n  @Input() fontIcon: string;\r\n  @Input() alt: string;\r\n\r\n  @Input('aria-label') hostAriaLabel: string = '';\r\n\r\n  private _previousFontSetClass: string;\r\n  private _previousFontIconClass: string;\r\n\r\n  constructor(\r\n      private _element: ElementRef,\r\n      private _renderer: Renderer,\r\n      private _mdIconRegistry: MdIconRegistry) { }\r\n\r\n  /**\r\n   * Splits an svgIcon binding value into its icon set and icon name components.\r\n   * Returns a 2-element array of [(icon set), (icon name)].\r\n   * The separator for the two fields is ':'. If there is no separator, an empty\r\n   * string is returned for the icon set and the entire value is returned for\r\n   * the icon name. If the argument is falsy, returns an array of two empty strings.\r\n   * Throws a MdIconInvalidNameError if the name contains two or more ':' separators.\r\n   * Examples:\r\n   *   'social:cake' -> ['social', 'cake']\r\n   *   'penguin' -> ['', 'penguin']\r\n   *   null -> ['', '']\r\n   *   'a:b:c' -> (throws MdIconInvalidNameError)\r\n   */\r\n  private _splitIconName(iconName: string): [string, string] {\r\n    if (!iconName) {\r\n      return ['', ''];\r\n    }\r\n    const parts = iconName.split(':');\r\n    switch (parts.length) {\r\n      case 1:\r\n        // Use default namespace.\r\n        return ['', parts[0]];\r\n      case 2:\r\n        return <[string, string]>parts;\r\n      default:\r\n        throw new MdIconInvalidNameError(iconName);\r\n    }\r\n  }\r\n\r\n  /** TODO: internal */\r\n  ngOnChanges(changes: { [propertyName: string]: SimpleChange }) {\r\n    const changedInputs = Object.keys(changes);\r\n    // Only update the inline SVG icon if the inputs changed, to avoid unnecessary DOM operations.\r\n    if (changedInputs.indexOf('svgIcon') != -1 || changedInputs.indexOf('svgSrc') != -1) {\r\n      if (this.svgIcon) {\r\n        const [namespace, iconName] = this._splitIconName(this.svgIcon);\r\n        this._mdIconRegistry.getNamedSvgIcon(iconName, namespace).subscribe(\r\n            svg => this._setSvgElement(svg),\r\n            (err: any) => console.log(`Error retrieving icon: ${err}`));\r\n      } else if (this.svgSrc) {\r\n        this._mdIconRegistry.getSvgIconFromUrl(this.svgSrc).subscribe(\r\n            svg => this._setSvgElement(svg),\r\n            (err: any) => console.log(`Error retrieving icon: ${err}`));\r\n      }\r\n    }\r\n    if (this._usingFontIcon()) {\r\n      this._updateFontIconClasses();\r\n    }\r\n    this._updateAriaLabel();\r\n  }\r\n\r\n  /** TODO: internal */\r\n  ngOnInit() {\r\n    // Update font classes because ngOnChanges won't be called if none of the inputs are present,\r\n    // e.g. <md-icon>arrow</md-icon>. In this case we need to add a CSS class for the default font.\r\n    if (this._usingFontIcon()) {\r\n      this._updateFontIconClasses();\r\n    }\r\n  }\r\n\r\n  /** TODO: internal */\r\n  ngAfterViewChecked() {\r\n    // Update aria label here because it may depend on the projected text content.\r\n    // (e.g. <md-icon>home</md-icon> should use 'home').\r\n    this._updateAriaLabel();\r\n  }\r\n\r\n  private _updateAriaLabel() {\r\n      const ariaLabel = this._getAriaLabel();\r\n      if (ariaLabel) {\r\n        this._renderer.setElementAttribute(this._element.nativeElement, 'aria-label', ariaLabel);\r\n      }\r\n  }\r\n\r\n  private _getAriaLabel() {\r\n    // If the parent provided an aria-label attribute value, use it as-is. Otherwise look for a\r\n    // reasonable value from the alt attribute, font icon name, SVG icon name, or (for ligatures)\r\n    // the text content of the directive.\r\n    const label =\r\n        this.hostAriaLabel ||\r\n        this.alt ||\r\n        this.fontIcon ||\r\n        this._splitIconName(this.svgIcon)[1];\r\n    if (label) {\r\n      return label;\r\n    }\r\n    // The \"content\" of an SVG icon is not a useful label.\r\n    if (this._usingFontIcon()) {\r\n      const text = this._element.nativeElement.textContent;\r\n      if (text) {\r\n        return text;\r\n      }\r\n    }\r\n    // TODO: Warn here in dev mode.\r\n    return null;\r\n  }\r\n\r\n  private _usingFontIcon(): boolean {\r\n    return !(this.svgIcon || this.svgSrc);\r\n  }\r\n\r\n  private _setSvgElement(svg: SVGElement) {\r\n    const layoutElement = this._element.nativeElement;\r\n    // Remove existing child nodes and add the new SVG element.\r\n    // We would use renderer.detachView(Array.from(layoutElement.childNodes)) here,\r\n    // but it fails in IE11: https://github.com/angular/angular/issues/6327\r\n    layoutElement.innerHTML = '';\r\n    this._renderer.projectNodes(layoutElement, [svg]);\r\n  }\r\n\r\n  private _updateFontIconClasses() {\r\n    if (!this._usingFontIcon()) {\r\n      return;\r\n    }\r\n    const elem = this._element.nativeElement;\r\n    const fontSetClass = this.fontSet ?\r\n        this._mdIconRegistry.classNameForFontAlias(this.fontSet) :\r\n        this._mdIconRegistry.getDefaultFontSetClass();\r\n    if (fontSetClass != this._previousFontSetClass) {\r\n      if (this._previousFontSetClass) {\r\n        this._renderer.setElementClass(elem, this._previousFontSetClass, false);\r\n      }\r\n      if (fontSetClass) {\r\n        this._renderer.setElementClass(elem, fontSetClass, true);\r\n      }\r\n      this._previousFontSetClass = fontSetClass;\r\n    }\r\n\r\n    if (this.fontIcon != this._previousFontIconClass) {\r\n      if (this._previousFontIconClass) {\r\n        this._renderer.setElementClass(elem, this._previousFontIconClass, false);\r\n      }\r\n      if (this.fontIcon) {\r\n        this._renderer.setElementClass(elem, this.fontIcon, true);\r\n      }\r\n      this._previousFontIconClass = this.fontIcon;\r\n    }\r\n  }\r\n}\r\n\r\nexport const MD_ICON_DIRECTIVES = [MdIcon];\r\n"]}