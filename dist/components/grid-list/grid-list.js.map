{"version":3,"file":"grid-list.js","sourceRoot":"","sources":["file:///C:/projects/material2/tmp/broccoli_type_script_compiler-input_base_path-2PVWyBBf.tmp/0/src/demo-app/components/grid-list/grid-list.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  ViewEncapsulation,\r\n  AfterContentChecked,\r\n  OnInit,\r\n  Input,\r\n  ContentChildren,\r\n  QueryList,\r\n  Renderer,\r\n  ElementRef,\r\n  Optional\r\n} from '@angular/core';\r\nimport {MdGridTile, MdGridTileText} from './grid-tile';\r\nimport {TileCoordinator} from './tile-coordinator';\r\nimport {\r\n    TileStyler,\r\n    FitTileStyler,\r\n    RatioTileStyler,\r\n    FixedTileStyler\r\n} from './tile-styler';\r\nimport {MdGridListColsError} from './grid-list-errors';\r\nimport {Dir} from '@angular2-material/core/rtl/dir';\r\nimport {MdLine} from '@angular2-material/core/line/line';\r\nimport {coerceToString, coerceToNumber} from './grid-list-measure';\r\n\r\n// TODO(kara): Conditional (responsive) column count / row size.\r\n// TODO(kara): Re-layout on window resize / media change (debounced).\r\n// TODO(kara): gridTileHeader and gridTileFooter.\r\n\r\nconst MD_FIT_MODE = 'fit';\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'md-grid-list',\r\n  templateUrl: 'grid-list.html',\r\n  styleUrls: ['grid-list.css'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class MdGridList implements OnInit, AfterContentChecked {\r\n  /** Number of columns being rendered. */\r\n  private _cols: number;\r\n\r\n  /**\r\n   * Row height value passed in by user. This can be one of three types:\r\n   * - Number value (ex: \"100px\"):  sets a fixed row height to that value\r\n   * - Ratio value (ex: \"4:3\"): sets the row height based on width:height ratio\r\n   * - \"Fit\" mode (ex: \"fit\"): sets the row height to total height divided by number of rows\r\n   */\r\n  private _rowHeight: string;\r\n\r\n  /** The amount of space between tiles. This will be something like '5px' or '2em'. */\r\n  private _gutter: string = '1px';\r\n\r\n  /** Sets position and size styles for a tile */\r\n  private _tileStyler: TileStyler;\r\n\r\n  /** Query list of tiles that are being rendered. */\r\n  @ContentChildren(MdGridTile) _tiles: QueryList<MdGridTile>;\r\n\r\n  constructor(\r\n      private _renderer: Renderer,\r\n      private _element: ElementRef,\r\n      @Optional() private _dir: Dir) {}\r\n\r\n  @Input()\r\n  get cols() {\r\n    return this._cols;\r\n  }\r\n\r\n  set cols(value: any) {\r\n    this._cols = coerceToNumber(value);\r\n  }\r\n\r\n  @Input('gutterSize')\r\n  get gutterSize() {\r\n    return this._gutter;\r\n  }\r\n\r\n  set gutterSize(value: any) {\r\n    this._gutter = coerceToString(value);\r\n  }\r\n\r\n  /** Set internal representation of row height from the user-provided value. */\r\n  @Input()\r\n  set rowHeight(value: string | number) {\r\n    this._rowHeight = coerceToString(value);\r\n    this._setTileStyler();\r\n  }\r\n\r\n  /** TODO: internal */\r\n  ngOnInit() {\r\n    this._checkCols();\r\n    this._checkRowHeight();\r\n  }\r\n\r\n  /**\r\n   * The layout calculation is fairly cheap if nothing changes, so there's little cost\r\n   * to run it frequently.\r\n   * TODO: internal\r\n   */\r\n  ngAfterContentChecked() {\r\n    this._layoutTiles();\r\n  }\r\n\r\n  /** Throw a friendly error if cols property is missing */\r\n  private _checkCols() {\r\n    if (!this.cols) {\r\n      throw new MdGridListColsError();\r\n    }\r\n  }\r\n\r\n  /** Default to equal width:height if rowHeight property is missing */\r\n  private _checkRowHeight(): void {\r\n    if (!this._rowHeight) {\r\n      this._tileStyler = new RatioTileStyler('1:1');\r\n    }\r\n  }\r\n\r\n  /** Creates correct Tile Styler subtype based on rowHeight passed in by user */\r\n  private _setTileStyler(): void {\r\n    if (this._rowHeight === MD_FIT_MODE) {\r\n      this._tileStyler = new FitTileStyler();\r\n    } else if (this._rowHeight && this._rowHeight.match(/:/g)) {\r\n      this._tileStyler = new RatioTileStyler(this._rowHeight);\r\n    } else {\r\n      this._tileStyler = new FixedTileStyler(this._rowHeight);\r\n    }\r\n  }\r\n\r\n  /** Computes and applies the size and position for all children grid tiles. */\r\n  private _layoutTiles(): void {\r\n    let tiles = this._tiles.toArray();\r\n    let tracker = new TileCoordinator(this.cols, tiles);\r\n    let direction = this._dir ? this._dir.value : 'ltr';\r\n    this._tileStyler.init(this.gutterSize, tracker, this.cols, direction);\r\n\r\n    for (let i = 0; i < tiles.length; i++) {\r\n      let pos = tracker.positions[i];\r\n      let tile = tiles[i];\r\n      this._tileStyler.setStyle(tile, pos.row, pos.col);\r\n    }\r\n    this._setListStyle(this._tileStyler.getComputedHeight());\r\n  }\r\n\r\n  /** Sets style on the main grid-list element, given the style name and value. */\r\n  _setListStyle(style: [string, string]): void {\r\n    if (style) {\r\n      this._renderer.setElementStyle(this._element.nativeElement, style[0], style[1]);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport const MD_GRID_LIST_DIRECTIVES: any[] = [MdGridList, MdGridTile, MdLine, MdGridTileText];\r\n"]}