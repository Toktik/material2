{"version":3,"file":"slider.js","sourceRoot":"","sources":["file:///C:/projects/material2/tmp/broccoli_type_script_compiler-input_base_path-2PVWyBBf.tmp/0/src/demo-app/components/slider/slider.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAOO,eAAe,CAAC,CAAA;AACvB,4BAAgC,iDAAiD,CAAC,CAAA;AAClF,gCAAgC,+CAA+C,CAAC,CAAA;AAkBhF;IAkFE,kBAAY,UAAsB;QAjFlC,uEAAuE;QAC/D,cAAS,GAAmB,IAAI,CAAC;QAEzC,oCAAoC;QAC5B,sBAAiB,GAAe,IAAI,CAAC;QAM7C,aAAQ,GAAY,KAAK,CAAC;QAE1B,mDAAmD;QAC3C,SAAI,GAAW,CAAC,CAAC;QAEzB,kDAAkD;QAC1C,SAAI,GAAW,GAAG,CAAC;QAE3B,kEAAkE;QAC1D,aAAQ,GAAW,CAAC,CAAC;QAE7B,kDAAkD;QACzC,SAAI,GAAW,CAAC,CAAC;QAE1B;;;;WAIG;QACH,cAAS,GAAY,KAAK,CAAC;QAE3B;;;;WAIG;QACH,aAAQ,GAAY,KAAK,CAAC;QAE1B,sDAAsD;QAC9C,mBAAc,GAAY,KAAK,CAAC;QAExC,2BAA2B;QACnB,WAAM,GAAW,CAAC,CAAC;QAwCzB,IAAI,CAAC,SAAS,GAAG,IAAI,cAAc,CAAC,UAAU,CAAC,CAAC;IAClD,CAAC;IArCD,sBAAI,yBAAG;aAAP;YACE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;aAED,UAAQ,CAAS;YACf,8DAA8D;YAC9D,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YAEtB,qEAAqE;YACrE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;YACzB,CAAC;QACH,CAAC;;;OAVA;IAcD,sBAAI,yBAAG;aAAP;YACE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;aAED,UAAQ,CAAS;YACf,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC;;;OAJA;IAQD,sBAAI,2BAAK;aAAT;YACE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACrB,CAAC;aAED,UAAU,CAAS;YACjB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC7B,CAAC;;;OALA;IAWD;;;;OAIG;IACH,qCAAkB,GAAlB;QACE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE,CAAC;QAC9D,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IACzF,CAAC;IAED,qBAAqB;IACrB,0BAAO,GAAP,UAAQ,KAAiB;QACvB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAClB,MAAM,CAAC;QACT,CAAC;QAED,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAC1B,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAE5C,6EAA6E;QAC7E,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IACzF,CAAC;IAED,qBAAqB;IACrB,0BAAO,GAAP,UAAQ,KAAkB;QACxB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAClB,MAAM,CAAC;QACT,CAAC;QAED,kDAAkD;QAClD,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAC/C,CAAC;IAED,qBAAqB;IACrB,+BAAY,GAAZ,UAAa,KAAkB;QAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAClB,MAAM,CAAC;QACT,CAAC;QAED,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;QAC1B,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAC/C,CAAC;IAED,qBAAqB;IACrB,6BAAU,GAAV;QACE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,gFAAgF;QAChF,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IACzF,CAAC;IAED,qBAAqB;IACrB,2BAAQ,GAAR;QACE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE,CAAC;QAC9D,qEAAqE;QACrE,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IACzF,CAAC;IAED,qBAAqB;IACrB,yBAAM,GAAN;QACE,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IACxB,CAAC;IAED;;;;OAIG;IACH,yCAAsB,GAAtB;QACE,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;IAClE,CAAC;IAED;;OAEG;IACH,0CAAuB,GAAvB,UAAwB,GAAW;QACjC,IAAI,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;QACzC,IAAI,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;QAExC,wFAAwF;QACxF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC;QAClD,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAEpE,+FAA+F;QAC/F,4BAA4B;QAC5B,IAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC;QAC1F,8CAA8C;QAC9C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QAC1D,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IACzF,CAAC;IAED;;OAEG;IACH,wBAAK,GAAL,UAAM,KAAa,EAAE,GAAO,EAAE,GAAO;QAAhB,mBAAO,GAAP,OAAO;QAAE,mBAAO,GAAP,OAAO;QACnC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;IAC7C,CAAC;IAxLD;QAAC,YAAK,EAAE;QACP,+BAAiB,EAAE;QACnB,kBAAW,CAAC,0BAA0B,CAAC;QACvC,kBAAW,CAAC,oBAAoB,CAAC;;8CAAA;IAalC;QAAC,YAAK,EAAE;;0CAAA;IAsBR;QAAC,YAAK,EAAE;QACP,kBAAW,CAAC,oBAAoB,CAAC;;uCAAA;IAelC;QAAC,YAAK,EAAE;QACP,kBAAW,CAAC,oBAAoB,CAAC;;uCAAA;IASlC;QAAC,YAAK,EAAE;QACP,kBAAW,CAAC,oBAAoB,CAAC;;yCAAA;IAxFpC;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,WAAW;YACrB,IAAI,EAAE;gBACJ,UAAU,EAAE,GAAG;gBACf,SAAS,EAAE,iBAAiB;gBAC5B,SAAS,EAAE,iBAAiB;gBAC5B,cAAc,EAAE,sBAAsB;gBACtC,YAAY,EAAE,cAAc;gBAC5B,iBAAiB,EAAE,YAAY;gBAC/B,QAAQ,EAAE,UAAU;aACrB;YACD,WAAW,EAAE,aAAa;YAC1B,SAAS,EAAE,CAAC,YAAY,CAAC;YACzB,aAAa,EAAE,wBAAiB,CAAC,IAAI;SACtC,CAAC;;gBAAA;IAiMF,eAAC;AAAD,CAAC,AAhMD,IAgMC;AAhMY,gBAAQ,WAgMpB,CAAA;AAED;;GAEG;AACH;IAGE,wBAAY,UAAsB;QAChC,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,aAAa,CAAC;IACjD,CAAC;IAED;;;;OAIG;IACH,4CAAmB,GAAnB;QACE,IAAI,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QACzE,MAAM,CAAC,YAAY,CAAC,qBAAqB,EAAE,CAAC;IAC9C,CAAC;IAED;;OAEG;IACH,mDAA0B,GAA1B,UAA2B,OAAe,EAAE,KAAa;QACvD,2FAA2F;QAC3F,IAAI,oBAAoB,GACP,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,2BAA2B,CAAC,CAAC;QAChF,IAAI,gBAAgB,GAAgB,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;QAE/F,IAAI,QAAQ,GAAG,OAAO,GAAG,KAAK,CAAC;QAE/B,gBAAgB,CAAC,KAAK,CAAC,KAAK,GAAM,QAAQ,OAAI,CAAC;QAC/C,mCAAiB,CAAC,oBAAoB,EAAE,gBAAc,QAAQ,QAAK,CAAC,CAAC;IACvE,CAAC;IAED;;;OAGG;IACH,iCAAQ,GAAR;QACE,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;IAC9B,CAAC;IACH,qBAAC;AAAD,CAAC,AAvCD,IAuCC;AAvCY,sBAAc,iBAuC1B,CAAA;AAEY,4BAAoB,GAAG,CAAC,QAAQ,CAAC,CAAC","sourcesContent":["import {\r\n  Component,\r\n  ElementRef,\r\n  HostBinding,\r\n  Input,\r\n  ViewEncapsulation,\r\n  AfterContentInit,\r\n} from '@angular/core';\r\nimport {BooleanFieldValue} from '@angular2-material/core/annotations/field-value';\r\nimport {applyCssTransform} from '@angular2-material/core/style/apply-transform';\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'md-slider',\r\n  host: {\r\n    'tabindex': '0',\r\n    '(click)': 'onClick($event)',\r\n    '(slide)': 'onSlide($event)',\r\n    '(slidestart)': 'onSlideStart($event)',\r\n    '(slideend)': 'onSlideEnd()',\r\n    '(window:resize)': 'onResize()',\r\n    '(blur)': 'onBlur()',\r\n  },\r\n  templateUrl: 'slider.html',\r\n  styleUrls: ['slider.css'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class MdSlider implements AfterContentInit {\r\n  /** A renderer to handle updating the slider's thumb and fill track. */\r\n  private _renderer: SliderRenderer = null;\r\n\r\n  /** The dimensions of the slider. */\r\n  private _sliderDimensions: ClientRect = null;\r\n\r\n  @Input()\r\n  @BooleanFieldValue()\r\n  @HostBinding('class.md-slider-disabled')\r\n  @HostBinding('attr.aria-disabled')\r\n  disabled: boolean = false;\r\n\r\n  /** The miniumum value that the slider can have. */\r\n  private _min: number = 0;\r\n\r\n  /** The maximum value that the slider can have. */\r\n  private _max: number = 100;\r\n\r\n  /** The percentage of the slider that coincides with the value. */\r\n  private _percent: number = 0;\r\n\r\n  /** The values at which the thumb will snap to. */\r\n  @Input() step: number = 1;\r\n\r\n  /**\r\n   * Whether or not the thumb is sliding.\r\n   * Used to determine if there should be a transition for the thumb and fill track.\r\n   * TODO: internal\r\n   */\r\n  isSliding: boolean = false;\r\n\r\n  /**\r\n   * Whether or not the slider is active (clicked or sliding).\r\n   * Used to shrink and grow the thumb as according to the Material Design spec.\r\n   * TODO: internal\r\n   */\r\n  isActive: boolean = false;\r\n\r\n  /** Indicator for if the value has been set or not. */\r\n  private _isInitialized: boolean = false;\r\n\r\n  /** Value of the slider. */\r\n  private _value: number = 0;\r\n\r\n  @Input()\r\n  @HostBinding('attr.aria-valuemin')\r\n  get min() {\r\n    return this._min;\r\n  }\r\n\r\n  set min(v: number) {\r\n    // This has to be forced as a number to handle the math later.\r\n    this._min = Number(v);\r\n\r\n    // If the value wasn't explicitly set by the user, set it to the min.\r\n    if (!this._isInitialized) {\r\n      this.value = this._min;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  @HostBinding('attr.aria-valuemax')\r\n  get max() {\r\n    return this._max;\r\n  }\r\n\r\n  set max(v: number) {\r\n    this._max = Number(v);\r\n  }\r\n\r\n  @Input()\r\n  @HostBinding('attr.aria-valuenow')\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  set value(v: number) {\r\n    this._value = Number(v);\r\n    this._isInitialized = true;\r\n  }\r\n\r\n  constructor(elementRef: ElementRef) {\r\n    this._renderer = new SliderRenderer(elementRef);\r\n  }\r\n\r\n  /**\r\n   * Once the slider has rendered, grab the dimensions and update the position of the thumb and\r\n   * fill track.\r\n   * TODO: internal\r\n   */\r\n  ngAfterContentInit() {\r\n    this._sliderDimensions = this._renderer.getSliderDimensions();\r\n    this.updatePercentFromValue();\r\n    this._renderer.updateThumbAndFillPosition(this._percent, this._sliderDimensions.width);\r\n  }\r\n\r\n  /** TODO: internal */\r\n  onClick(event: MouseEvent) {\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n\r\n    this.isActive = true;\r\n    this.isSliding = false;\r\n    this._renderer.addFocus();\r\n    this.updateValueFromPosition(event.clientX);\r\n\r\n    // Once the click is over the thumb has to snap to its new physical location.\r\n    this.updatePercentFromValue();\r\n    this._renderer.updateThumbAndFillPosition(this._percent, this._sliderDimensions.width);\r\n  }\r\n\r\n  /** TODO: internal */\r\n  onSlide(event: HammerInput) {\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n\r\n    // Prevent the slide from selecting anything else.\r\n    event.preventDefault();\r\n    this.updateValueFromPosition(event.center.x);\r\n  }\r\n\r\n  /** TODO: internal */\r\n  onSlideStart(event: HammerInput) {\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n    this.isSliding = true;\r\n    this.isActive = true;\r\n    this._renderer.addFocus();\r\n    this.updateValueFromPosition(event.center.x);\r\n  }\r\n\r\n  /** TODO: internal */\r\n  onSlideEnd() {\r\n    this.isSliding = false;\r\n    // Once sliding is completed the thumb has to snap to its new physical location.\r\n    this.updatePercentFromValue();\r\n    this._renderer.updateThumbAndFillPosition(this._percent, this._sliderDimensions.width);\r\n  }\r\n\r\n  /** TODO: internal */\r\n  onResize() {\r\n    this.isSliding = true;\r\n    this._sliderDimensions = this._renderer.getSliderDimensions();\r\n    // Skip updating the value and position as there is no new placement.\r\n    this._renderer.updateThumbAndFillPosition(this._percent, this._sliderDimensions.width);\r\n  }\r\n\r\n  /** TODO: internal */\r\n  onBlur() {\r\n    this.isActive = false;\r\n  }\r\n\r\n  /**\r\n   * When the value changes without a physical position, the percentage needs to be recalculated\r\n   * independent of the physical location.\r\n   * This is also used to move the thumb to a snapped value once sliding is done.\r\n   */\r\n  updatePercentFromValue() {\r\n    this._percent = (this.value - this.min) / (this.max - this.min);\r\n  }\r\n\r\n  /**\r\n   * Calculate the new value from the new physical location. The value will always be snapped.\r\n   */\r\n  updateValueFromPosition(pos: number) {\r\n    let offset = this._sliderDimensions.left;\r\n    let size = this._sliderDimensions.width;\r\n\r\n    // The exact value is calculated from the event and used to find the closest snap value.\r\n    this._percent = this.clamp((pos - offset) / size);\r\n    let exactValue = this.min + (this._percent * (this.max - this.min));\r\n\r\n    // This calculation finds the closest step by finding the closest whole number divisible by the\r\n    // step relative to the min.\r\n    let closestValue = Math.round((exactValue - this.min) / this.step) * this.step + this.min;\r\n    // The value needs to snap to the min and max.\r\n    this.value = this.clamp(closestValue, this.min, this.max);\r\n    this._renderer.updateThumbAndFillPosition(this._percent, this._sliderDimensions.width);\r\n  }\r\n\r\n  /**\r\n   * Return a number between two numbers.\r\n   */\r\n  clamp(value: number, min = 0, max = 1) {\r\n    return Math.max(min, Math.min(value, max));\r\n  }\r\n}\r\n\r\n/**\r\n * Renderer class in order to keep all dom manipulation in one place and outside of the main class.\r\n */\r\nexport class SliderRenderer {\r\n  private _sliderElement: HTMLElement;\r\n\r\n  constructor(elementRef: ElementRef) {\r\n    this._sliderElement = elementRef.nativeElement;\r\n  }\r\n\r\n  /**\r\n   * Get the bounding client rect of the slider track element.\r\n   * The track is used rather than the native element to ignore the extra space that the thumb can\r\n   * take up.\r\n   */\r\n  getSliderDimensions() {\r\n    let trackElement = this._sliderElement.querySelector('.md-slider-track');\r\n    return trackElement.getBoundingClientRect();\r\n  }\r\n\r\n  /**\r\n   * Update the physical position of the thumb and fill track on the slider.\r\n   */\r\n  updateThumbAndFillPosition(percent: number, width: number) {\r\n    // A container element that is used to avoid overwriting the transform on the thumb itself.\r\n    let thumbPositionElement =\r\n        <HTMLElement>this._sliderElement.querySelector('.md-slider-thumb-position');\r\n    let fillTrackElement = <HTMLElement>this._sliderElement.querySelector('.md-slider-track-fill');\r\n\r\n    let position = percent * width;\r\n\r\n    fillTrackElement.style.width = `${position}px`;\r\n    applyCssTransform(thumbPositionElement, `translateX(${position}px)`);\r\n  }\r\n\r\n  /**\r\n   * Focuses the native element.\r\n   * Currently only used to allow a blur event to fire but will be used with keyboard input later.\r\n   */\r\n  addFocus() {\r\n    this._sliderElement.focus();\r\n  }\r\n}\r\n\r\nexport const MD_SLIDER_DIRECTIVES = [MdSlider];\r\n"]}