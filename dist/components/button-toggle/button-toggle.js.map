{"version":3,"file":"button-toggle.js","sourceRoot":"","sources":["file:///C:/projects/material2/tmp/broccoli_type_script_compiler-input_base_path-2PVWyBBf.tmp/0/src/demo-app/components/button-toggle/button-toggle.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n    Component,\r\n    ContentChildren,\r\n    Directive,\r\n    EventEmitter,\r\n    HostBinding,\r\n    Input,\r\n    OnInit,\r\n    Optional,\r\n    Output,\r\n    QueryList,\r\n    ViewEncapsulation,\r\n    forwardRef\r\n} from '@angular/core';\r\nimport {\r\n    NG_VALUE_ACCESSOR,\r\n    ControlValueAccessor,\r\n} from '@angular/forms';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {\r\n    MdUniqueSelectionDispatcher\r\n} from '@angular2-material/core/coordination/unique-selection-dispatcher';\r\nimport {BooleanFieldValue} from '@angular2-material/core/annotations/field-value';\r\n\r\nexport type ToggleType = 'checkbox' | 'radio';\r\n\r\n\r\n\r\n/**\r\n * Provider Expression that allows md-button-toggle-group to register as a ControlValueAccessor.\r\n * This allows it to support [(ngModel)].\r\n */\r\nexport const MD_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => MdButtonToggleGroup),\r\n  multi: true\r\n};\r\n\r\nvar _uniqueIdCounter = 0;\r\n\r\n/** A simple change event emitted by either MdButtonToggle or MdButtonToggleGroup. */\r\nexport class MdButtonToggleChange {\r\n  source: MdButtonToggle;\r\n  value: any;\r\n}\r\n\r\n/** Exclusive selection button toggle group that behaves like a radio-button group. */\r\n@Directive({\r\n  selector: 'md-button-toggle-group:not([multiple])',\r\n  providers: [MD_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR],\r\n  host: {\r\n    'role': 'radiogroup',\r\n  },\r\n})\r\nexport class MdButtonToggleGroup implements ControlValueAccessor {\r\n  /** The value for the button toggle group. Should match currently selected button toggle. */\r\n  private _value: any = null;\r\n\r\n  /** The HTML name attribute applied to toggles in this group. */\r\n  private _name: string = `md-radio-group-${_uniqueIdCounter++}`;\r\n\r\n  /** Disables all toggles in the group. */\r\n  private _disabled: boolean = null;\r\n\r\n  /** The currently selected button toggle, should match the value. */\r\n  private _selected: MdButtonToggle = null;\r\n\r\n  /** The method to be called in order to update ngModel. */\r\n  private _controlValueAccessorChangeFn: (value: any) => void = (value) => {};\r\n\r\n  /** onTouch function registered via registerOnTouch (ControlValueAccessor). */\r\n  onTouched: () => any = () => {};\r\n\r\n  /** Event emitted when the group's value changes. */\r\n  private _change: EventEmitter<MdButtonToggleChange> = new EventEmitter<MdButtonToggleChange>();\r\n  @Output() get change(): Observable<MdButtonToggleChange> {\r\n    return this._change.asObservable();\r\n  }\r\n\r\n  /** Child button toggle buttons. */\r\n  @ContentChildren(forwardRef(() => MdButtonToggle))\r\n  _buttonToggles: QueryList<MdButtonToggle> = null;\r\n\r\n  @Input()\r\n  get name(): string {\r\n    return this._name;\r\n  }\r\n\r\n  set name(value: string) {\r\n    this._name = value;\r\n    this._updateButtonToggleNames();\r\n  }\r\n\r\n  @Input()\r\n  @BooleanFieldValue()\r\n  get disabled(): boolean {\r\n    return this._disabled;\r\n  }\r\n\r\n  set disabled(value) {\r\n    this._disabled = (value != null && value !== false) ? true : null;\r\n  }\r\n\r\n  @Input()\r\n  get value(): any {\r\n    return this._value;\r\n  }\r\n\r\n  set value(newValue: any) {\r\n    if (this._value != newValue) {\r\n      this._value = newValue;\r\n\r\n      this._updateSelectedButtonToggleFromValue();\r\n      this._emitChangeEvent();\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  get selected() {\r\n    return this._selected;\r\n  }\r\n\r\n  set selected(selected: MdButtonToggle) {\r\n    this._selected = selected;\r\n    this.value = selected ? selected.value : null;\r\n\r\n    if (selected && !selected.checked) {\r\n      selected.checked = true;\r\n    }\r\n  }\r\n\r\n  private _updateButtonToggleNames(): void {\r\n    (this._buttonToggles || []).forEach((toggle) => {\r\n      toggle.name = this._name;\r\n    });\r\n  }\r\n\r\n  // TODO: Refactor into shared code with radio.\r\n  private _updateSelectedButtonToggleFromValue(): void {\r\n    let isAlreadySelected = this._selected != null && this._selected.value == this._value;\r\n\r\n    if (this._buttonToggles != null && !isAlreadySelected) {\r\n      let matchingButtonToggle = this._buttonToggles.filter(\r\n          buttonToggle => buttonToggle.value == this._value)[0];\r\n\r\n      if (matchingButtonToggle) {\r\n        this.selected = matchingButtonToggle;\r\n      } else if (this.value == null) {\r\n        this.selected = null;\r\n        this._buttonToggles.forEach(buttonToggle => {\r\n          buttonToggle.checked = false;\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Dispatch change event with current selection and group value. */\r\n  private _emitChangeEvent(): void {\r\n    let event = new MdButtonToggleChange();\r\n    event.source = this._selected;\r\n    event.value = this._value;\r\n    this._controlValueAccessorChangeFn(event.value);\r\n    this._change.emit(event);\r\n  }\r\n\r\n  /**\r\n   * Implemented as part of ControlValueAccessor.\r\n   * TODO: internal\r\n   */\r\n  writeValue(value: any) {\r\n    this.value = value;\r\n  }\r\n\r\n  /**\r\n   * Implemented as part of ControlValueAccessor.\r\n   * TODO: internal\r\n   */\r\n  registerOnChange(fn: (value: any) => void) {\r\n    this._controlValueAccessorChangeFn = fn;\r\n  }\r\n\r\n  /**\r\n   * Implemented as part of ControlValueAccessor.\r\n   * TODO: internal\r\n   */\r\n  registerOnTouched(fn: any) {\r\n    this.onTouched = fn;\r\n  }\r\n}\r\n\r\n/** Multiple selection button-toggle group. */\r\n@Directive({\r\n  selector: 'md-button-toggle-group[multiple]',\r\n})\r\nexport class MdButtonToggleGroupMultiple {\r\n  /** Disables all toggles in the group. */\r\n  private _disabled: boolean = null;\r\n\r\n  @Input()\r\n  get disabled(): boolean {\r\n    return this._disabled;\r\n  }\r\n\r\n  set disabled(value) {\r\n    this._disabled = (value != null && value !== false) ? true : null;\r\n  }\r\n}\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'md-button-toggle',\r\n  templateUrl: 'button-toggle.html',\r\n  styleUrls: ['button-toggle.css'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class MdButtonToggle implements OnInit {\r\n  /** Whether or not this button toggle is checked. */\r\n  private _checked: boolean = false;\r\n\r\n  /** Type of the button toggle. Either 'radio' or 'checkbox'. */\r\n  _type: ToggleType;\r\n\r\n  /** The unique ID for this button toggle. */\r\n  @HostBinding()\r\n  @Input()\r\n  id: string;\r\n\r\n  /** HTML's 'name' attribute used to group radios for unique selection. */\r\n  @Input()\r\n  name: string;\r\n\r\n  /** Whether or not this button toggle is disabled. */\r\n  private _disabled: boolean = null;\r\n\r\n  /** Value assigned to this button toggle. */\r\n  private _value: any = null;\r\n\r\n  /** Whether or not the button toggle is a single selection. */\r\n  private _isSingleSelector: boolean = null;\r\n\r\n  /** The parent button toggle group (exclusive selection). Optional. */\r\n  buttonToggleGroup: MdButtonToggleGroup;\r\n\r\n  /** The parent button toggle group (multiple selection). Optional. */\r\n  buttonToggleGroupMultiple: MdButtonToggleGroupMultiple;\r\n\r\n  /** Event emitted when the group value changes. */\r\n  private _change: EventEmitter<MdButtonToggleChange> = new EventEmitter<MdButtonToggleChange>();\r\n  @Output() get change(): Observable<MdButtonToggleChange> {\r\n    return this._change.asObservable();\r\n  }\r\n\r\n  constructor(@Optional() toggleGroup: MdButtonToggleGroup,\r\n              @Optional() toggleGroupMultiple: MdButtonToggleGroupMultiple,\r\n              public buttonToggleDispatcher: MdUniqueSelectionDispatcher) {\r\n    this.buttonToggleGroup = toggleGroup;\r\n\r\n    this.buttonToggleGroupMultiple = toggleGroupMultiple;\r\n\r\n    if (this.buttonToggleGroup) {\r\n      buttonToggleDispatcher.listen((id: string, name: string) => {\r\n        if (id != this.id && name == this.name) {\r\n          this.checked = false;\r\n        }\r\n      });\r\n\r\n      this._type = 'radio';\r\n      this.name = this.buttonToggleGroup.name;\r\n      this._isSingleSelector = true;\r\n    } else {\r\n      // Even if there is no group at all, treat the button toggle as a checkbox so it can be\r\n      // toggled on or off.\r\n      this._type = 'checkbox';\r\n      this._isSingleSelector = false;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.id == null) {\r\n      this.id = `md-button-toggle-${_uniqueIdCounter++}`;\r\n    }\r\n\r\n    if (this.buttonToggleGroup && this._value == this.buttonToggleGroup.value) {\r\n      this._checked = true;\r\n    }\r\n  }\r\n\r\n  get inputId(): string {\r\n    return `${this.id}-input`;\r\n  }\r\n\r\n  @HostBinding('class.md-button-toggle-checked')\r\n  @Input()\r\n  get checked(): boolean {\r\n    return this._checked;\r\n  }\r\n\r\n  set checked(newCheckedState: boolean) {\r\n    if (this._isSingleSelector) {\r\n      if (newCheckedState) {\r\n        // Notify all button toggles with the same name (in the same group) to un-check.\r\n        this.buttonToggleDispatcher.notify(this.id, this.name);\r\n      }\r\n\r\n      if (newCheckedState != this._checked) {\r\n        this._emitChangeEvent();\r\n      }\r\n    }\r\n\r\n    this._checked = newCheckedState;\r\n\r\n    if (newCheckedState && this._isSingleSelector && this.buttonToggleGroup.value != this.value) {\r\n      this.buttonToggleGroup.selected = this;\r\n    }\r\n  }\r\n\r\n  /** MdButtonToggleGroup reads this to assign its own value. */\r\n  @Input()\r\n  get value(): any {\r\n    return this._value;\r\n  }\r\n\r\n  set value(value: any) {\r\n    if (this._value != value) {\r\n      if (this.buttonToggleGroup != null && this.checked) {\r\n        this.buttonToggleGroup.value = value;\r\n      }\r\n      this._value = value;\r\n    }\r\n  }\r\n\r\n  /** Dispatch change event with current value. */\r\n  private _emitChangeEvent(): void {\r\n    let event = new MdButtonToggleChange();\r\n    event.source = this;\r\n    event.value = this._value;\r\n    this._change.emit(event);\r\n  }\r\n\r\n  @HostBinding('class.md-button-toggle-disabled')\r\n  @Input()\r\n  get disabled(): boolean {\r\n    return this._disabled || (this.buttonToggleGroup != null && this.buttonToggleGroup.disabled) ||\r\n        (this.buttonToggleGroupMultiple != null && this.buttonToggleGroupMultiple.disabled);\r\n  }\r\n\r\n  set disabled(value: boolean) {\r\n    this._disabled = (value != null && value !== false) ? true : null;\r\n  }\r\n\r\n  /** Toggle the state of the current button toggle. */\r\n  private _toggle(): void {\r\n    this.checked = !this.checked;\r\n  }\r\n\r\n  /** Checks the button toggle due to an interaction with the underlying native input. */\r\n  _onInputChange(event: Event) {\r\n    event.stopPropagation();\r\n\r\n    if (this._isSingleSelector) {\r\n      // Propagate the change one-way via the group, which will in turn mark this\r\n      // button toggle as checked.\r\n      this.checked = true;\r\n      this.buttonToggleGroup.selected = this;\r\n      this.buttonToggleGroup.onTouched();\r\n    } else {\r\n      this._toggle();\r\n    }\r\n  }\r\n}\r\n\r\nexport const MD_BUTTON_TOGGLE_DIRECTIVES = [\r\n  MdButtonToggleGroup,\r\n  MdButtonToggleGroupMultiple,\r\n  MdButtonToggle\r\n];\r\n"]}