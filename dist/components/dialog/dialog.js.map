{"version":3,"file":"dialog.js","sourceRoot":"","sources":["file:///C:/projects/material2/tmp/broccoli_type_script_compiler-input_base_path-2PVWyBBf.tmp/0/src/demo-app/components/dialog/dialog.ts"],"names":[],"mappings":"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","sourcesContent":["import {Injector, ComponentRef, Injectable} from '@angular/core';\r\nimport {Overlay} from '@angular2-material/core/overlay/overlay';\r\nimport {OverlayRef} from '@angular2-material/core/overlay/overlay-ref';\r\nimport {OverlayState} from '@angular2-material/core/overlay/overlay-state';\r\nimport {ComponentPortal} from '@angular2-material/core/portal/portal';\r\nimport {ComponentType} from '@angular2-material/core/overlay/generic-component-type';\r\nimport {MdDialogConfig} from './dialog-config';\r\nimport {MdDialogRef} from './dialog-ref';\r\nimport {DialogInjector} from './dialog-injector';\r\nimport {MdDialogContainer} from './dialog-container';\r\n\r\n\r\nexport {MdDialogConfig} from './dialog-config';\r\nexport {MdDialogRef} from './dialog-ref';\r\n\r\n\r\n// TODO(jelbourn): add shortcuts for `alert` and `confirm`.\r\n// TODO(jelbourn): add support for opening with a TemplateRef\r\n// TODO(jelbourn): add `closeAll` method\r\n// TODO(jelbourn): add backdrop\r\n// TODO(jelbourn): default dialog config\r\n// TODO(jelbourn): focus trapping\r\n// TODO(jelbourn): potentially change API from accepting component constructor to component factory.\r\n\r\n\r\n\r\n/**\r\n * Service to open Material Design modal dialogs.\r\n */\r\n@Injectable()\r\nexport class MdDialog {\r\n  constructor(private _overlay: Overlay, private _injector: Injector) { }\r\n\r\n  /**\r\n   * Opens a modal dialog containing the given component.\r\n   * @param component Type of the component to load into the load.\r\n   * @param config\r\n   */\r\n  open<T>(component: ComponentType<T>, config: MdDialogConfig): Promise<MdDialogRef<T>> {\r\n    let overlayRef: OverlayRef;\r\n\r\n    return this._createOverlay(config)\r\n        .then(overlay => overlayRef = overlay)\r\n        .then(overlay => this._attachDialogContainer(overlay, config))\r\n        .then(containerRef => this._attachDialogContent(component, containerRef, overlayRef));\r\n  }\r\n\r\n  /**\r\n   * Creates the overlay into which the dialog will be loaded.\r\n   * @param dialogConfig The dialog configuration.\r\n   * @returns A promise resolving to the OverlayRef for the created overlay.\r\n   */\r\n  private _createOverlay(dialogConfig: MdDialogConfig): Promise<OverlayRef> {\r\n    let overlayState = this._getOverlayState(dialogConfig);\r\n    return this._overlay.create(overlayState);\r\n  }\r\n\r\n  /**\r\n   * Attaches an MdDialogContainer to a dialog's already-created overlay.\r\n   * @param overlay Reference to the dialog's underlying overlay.\r\n   * @param config The dialog configuration.\r\n   * @returns A promise resolving to a ComponentRef for the attached container.\r\n   */\r\n  private _attachDialogContainer(overlay: OverlayRef, config: MdDialogConfig):\r\n      Promise<ComponentRef<MdDialogContainer>> {\r\n    let containerPortal = new ComponentPortal(MdDialogContainer, config.viewContainerRef);\r\n    return overlay.attach(containerPortal).then((containerRef: ComponentRef<MdDialogContainer>) => {\r\n      // Pass the config directly to the container so that it can consume any relevant settings.\r\n      containerRef.instance.dialogConfig = config;\r\n      return containerRef;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Attaches the user-provided component to the already-created MdDialogContainer.\r\n   * @param component The type of component being loaded into the dialog.\r\n   * @param containerRef Reference to the wrapping MdDialogContainer.\r\n   * @param overlayRef Reference to the overlay in which the dialog resides.\r\n   * @returns A promise resolving to the MdDialogRef that should be returned to the user.\r\n   */\r\n  private _attachDialogContent<T>(\r\n      component: ComponentType<T>,\r\n      containerRef: ComponentRef<MdDialogContainer>,\r\n      overlayRef: OverlayRef): Promise<MdDialogRef<T>> {\r\n    let dialogContainer = containerRef.instance;\r\n\r\n    // Create a reference to the dialog we're creating in order to give the user a handle\r\n    // to modify and close it.\r\n    let dialogRef = new MdDialogRef(overlayRef);\r\n\r\n    // We create an injector specifically for the component we're instantiating so that it can\r\n    // inject the MdDialogRef. This allows a component loaded inside of a dialog to close itself\r\n    // and, optionally, to return a value.\r\n    let dialogInjector = new DialogInjector(dialogRef, this._injector);\r\n\r\n    let contentPortal = new ComponentPortal(component, null, dialogInjector);\r\n    return dialogContainer.attachComponentPortal(contentPortal).then(contentRef => {\r\n      dialogRef.componentInstance = contentRef.instance;\r\n      return dialogRef;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates an overlay state from a dialog config.\r\n   * @param dialogConfig The dialog configuration.\r\n   * @returns The overlay configuration.\r\n   */\r\n  private _getOverlayState(dialogConfig: MdDialogConfig): OverlayState {\r\n    let state = new OverlayState();\r\n\r\n    state.positionStrategy = this._overlay.position()\r\n        .global()\r\n        .centerHorizontally()\r\n        .centerVertically();\r\n\r\n    return state;\r\n  }\r\n}\r\n"]}