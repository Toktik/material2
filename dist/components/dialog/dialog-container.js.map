{"version":3,"file":"dialog-container.js","sourceRoot":"","sources":["file:///C:/projects/material2/tmp/broccoli_type_script_compiler-input_base_path-2PVWyBBf.tmp/0/src/demo-app/components/dialog/dialog-container.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,qBAAgE,eAAe,CAAC,CAAA;AAChF,uBAIO,uCAAuC,CAAC,CAAA;AAC/C,kCAAkC,kDAAkD,CAAC,CAAA;AACrF,kCAA+B,iDAAiD,CAAC,CAAA;AAEjF,8BAAkD,iBAAiB,CAAC,CAAA;AAGpE;;GAEG;AAYH;IAAuC,qCAAc;IAArD;QAAuC,8BAAc;IA2DrD,CAAC;IA3CC,qBAAqB;IACrB,2CAAe,GAAf;QAAA,iBAeC;QAdC,yFAAyF;QACzF,4EAA4E;QAC5E,EAAE,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,UAAA,YAAY;gBACtE,KAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;gBAEpD,KAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;gBAClC,KAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;YACvC,CAAC,EAAE;gBACD,KAAI,CAAC,wBAAwB,CAAC,MAAM,EAAE,CAAC;gBACvC,KAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;gBACrC,KAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;YACpC,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,2DAA2D;IAC3D,iDAAqB,GAArB,UAAyB,MAA0B;QACjD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;gBACnC,MAAM,IAAI,mDAAmC,EAAE,CAAC;YAClD,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;QACxD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,wFAAwF;YACxF,0FAA0F;YAC1F,kCAAkC;YAClC,EAAE,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC;gBAClC,MAAM,IAAI,mDAAmC,EAAE,CAAC;YAClD,CAAC;YAED,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC;YACpC,IAAI,CAAC,wBAAwB,GAAG,IAAI,oCAAgB,EAAE,CAAC;YACvD,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC;QAC/C,CAAC;IACH,CAAC;IAED,gDAAoB,GAApB,UAAqB,MAAsB;QACzC,MAAM,KAAK,CAAC,qBAAqB,CAAC,CAAC;IACrC,CAAC;IAxDD;QAAC,gBAAS,CAAC,uCAAmB,CAAC;;0DAAA;IAbjC;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,qBAAqB;YAC/B,WAAW,EAAE,uBAAuB;YACpC,SAAS,EAAE,CAAC,sBAAsB,CAAC;YACnC,UAAU,EAAE,CAAC,uCAAmB,CAAC;YACjC,IAAI,EAAE;gBACJ,OAAO,EAAE,qBAAqB;gBAC9B,aAAa,EAAE,oBAAoB;aACpC;SACF,CAAC;;yBAAA;IA4DF,wBAAC;AAAD,CAAC,AA3DD,CAAuC,uBAAc,GA2DpD;AA3DY,yBAAiB,oBA2D7B,CAAA","sourcesContent":["import {Component, ComponentRef, ViewChild, AfterViewInit} from '@angular/core';\r\nimport {\r\n  BasePortalHost,\r\n  ComponentPortal,\r\n  TemplatePortal\r\n} from '@angular2-material/core/portal/portal';\r\nimport {PortalHostDirective} from '@angular2-material/core/portal/portal-directives';\r\nimport {PromiseCompleter} from '@angular2-material/core/async/promise-completer';\r\nimport {MdDialogConfig} from './dialog-config';\r\nimport {MdDialogContentAlreadyAttachedError} from './dialog-errors';\r\n\r\n\r\n/**\r\n * Internal component that wraps user-provided dialog content.\r\n */\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'md-dialog-container',\r\n  templateUrl: 'dialog-container.html',\r\n  styleUrls: ['dialog-container.css'],\r\n  directives: [PortalHostDirective],\r\n  host: {\r\n    'class': 'md-dialog-container',\r\n    '[attr.role]': 'dialogConfig?.role'\r\n  }\r\n})\r\nexport class MdDialogContainer extends BasePortalHost implements AfterViewInit {\r\n  /** The portal host inside of this container into which the dialog content will be loaded. */\r\n  @ViewChild(PortalHostDirective) private _portalHost: PortalHostDirective;\r\n\r\n  /**\r\n   * Completer used to resolve the promise for cases when a portal is attempted to be attached,\r\n   * but AfterViewInit has not yet occured.\r\n   */\r\n  private _deferredAttachCompleter: PromiseCompleter<ComponentRef<any>>;\r\n\r\n  /** Portal to be attached upon AfterViewInit. */\r\n  private _deferredAttachPortal: ComponentPortal<any>;\r\n\r\n  /** The dialog configuration. */\r\n  dialogConfig: MdDialogConfig;\r\n\r\n  /** TODO: internal */\r\n  ngAfterViewInit() {\r\n    // If there was an attempted call to `attachComponentPortal` before this lifecycle stage,\r\n    // we actually perform the attachment now that the `@ViewChild` is resolved.\r\n    if (this._deferredAttachCompleter) {\r\n      this.attachComponentPortal(this._deferredAttachPortal).then(componentRef => {\r\n        this._deferredAttachCompleter.resolve(componentRef);\r\n\r\n        this._deferredAttachPortal = null;\r\n        this._deferredAttachCompleter = null;\r\n      }, () => {\r\n        this._deferredAttachCompleter.reject();\r\n        this._deferredAttachCompleter = null;\r\n        this._deferredAttachPortal = null;\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Attach a portal as content to this dialog container. */\r\n  attachComponentPortal<T>(portal: ComponentPortal<T>): Promise<ComponentRef<T>> {\r\n    if (this._portalHost) {\r\n      if (this._portalHost.hasAttached()) {\r\n        throw new MdDialogContentAlreadyAttachedError();\r\n      }\r\n\r\n      return this._portalHost.attachComponentPortal(portal);\r\n    } else {\r\n      // The @ViewChild query for the portalHost is not resolved until AfterViewInit, but this\r\n      // function may be called before this lifecycle event. As such, we defer the attachment of\r\n      // the portal until AfterViewInit.\r\n      if (this._deferredAttachCompleter) {\r\n        throw new MdDialogContentAlreadyAttachedError();\r\n      }\r\n\r\n      this._deferredAttachPortal = portal;\r\n      this._deferredAttachCompleter = new PromiseCompleter();\r\n      return this._deferredAttachCompleter.promise;\r\n    }\r\n  }\r\n\r\n  attachTemplatePortal(portal: TemplatePortal): Promise<Map<string, any>> {\r\n    throw Error('Not yet implemented');\r\n  }\r\n}\r\n"]}